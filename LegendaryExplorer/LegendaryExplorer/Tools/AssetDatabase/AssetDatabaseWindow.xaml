<bases:TrackingNotifyPropertyChangedWindowBase
       x:Class="LegendaryExplorer.Tools.AssetDatabase.AssetDatabaseWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:xctk="http://schemas.xceed.com/wpf/xaml/toolkit"
        xmlns:fa="http://schemas.fontawesome.com/icons/"
        xmlns:componentModel="clr-namespace:System.ComponentModel;assembly=WindowsBase"
        xmlns:bases="clr-namespace:LegendaryExplorer.SharedUI.Bases"
        xmlns:assetDatabase="clr-namespace:LegendaryExplorer.Tools.AssetDatabase"
        xmlns:converters="clr-namespace:LegendaryExplorer.SharedUI.Converters"
        xmlns:global="clr-namespace:LegendaryExplorer"
        xmlns:sharedToolControls="clr-namespace:LegendaryExplorer.UserControls.SharedToolControls"
        xmlns:controls="clr-namespace:LegendaryExplorer.SharedUI.Controls"
        xmlns:exportLoaderControls="clr-namespace:LegendaryExplorer.UserControls.ExportLoaderControls"
        Loaded="AssetDB_Loaded"
        Closing="AssetDB_Closing"
        AllowDrop="True"
        Icon="pack://application:,,,/Tools/Icons/16x16/AssetDatabase_Icon_16.ico"
        Title="Asset Database" Height="700" Width="1200"
        DataContext="{Binding RelativeSource={RelativeSource Self}}">
    <Window.Resources>
        <assetDatabase:FileIndexToNameConverter x:Key="FileIndexToNameConverter"/>
        <converters:GameTypeConverter x:Key="GameTypeConverter"/>
        <converters:BoolToVisibilityConverter x:Key="BoolToVisibilityConverter"/>
        <converters:InverseBoolToVisibilityConverter x:Key="InverseBoolToVisibilityConverter"/>
        <converters:NullVisibilityConverter x:Key="NullVisibilityConverter"/>
        <converters:InverseBooleanConverter x:Key="InverseBooleanConverter"/>
        <converters:MultiEnumComparisonConverter x:Key="MultiEnumComparisonConverter"/>
        <DataTemplate x:Key="PropertyTemplate" DataType="assetDatabase:PropertyRecord">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="70"/>
                    <ColumnDefinition Width="1*"/>
                </Grid.ColumnDefinitions>
                <TextBlock FontSize="10" Text="{Binding Type}" VerticalAlignment="Center" Foreground="Gray"/>
                <TextBlock Grid.Column="1"  Text="{Binding Property}" />
            </Grid>
        </DataTemplate>
        <CollectionViewSource x:Key="PropertyContentView" Source="{Binding SelectedItem.PropertyRecords.Values, ElementName=lstbx_Classes}">
            <CollectionViewSource.SortDescriptions>
                <componentModel:SortDescription PropertyName="Property" Direction="Ascending"/>
            </CollectionViewSource.SortDescriptions>
        </CollectionViewSource>
        <Style x:Key="FileLVHeader" TargetType="{x:Type GridViewColumnHeader}">
            <Setter Property="HorizontalContentAlignment" Value="Left" />
        </Style>
        <DataTemplate x:Key="HeaderTemplateArrowUp">
            <DockPanel LastChildFill="True" Width="{Binding ActualWidth, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type GridViewColumnHeader}}}">
                <Path x:Name="arrowUp" StrokeThickness="1" Fill="Gray" Data="M 5,10 L 15,10 L 10,5 L 5,10" DockPanel.Dock="Right" Width="20" HorizontalAlignment="Right" Margin="5,0,5,0" SnapsToDevicePixels="True"/>
                <TextBlock Text="{Binding }" />
            </DockPanel>
        </DataTemplate>
        <DataTemplate x:Key="HeaderTemplateArrowDown">
            <DockPanel LastChildFill="True" Width="{Binding ActualWidth, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type GridViewColumnHeader}}}">
                <Path x:Name="arrowDown" StrokeThickness="1" Fill="Gray"  Data="M 5,5 L 10,10 L 15,5 L 5,5" DockPanel.Dock="Right" Width="20" HorizontalAlignment="Right" Margin="5,0,5,0" SnapsToDevicePixels="True"/>
                <TextBlock Text="{Binding }" />
            </DockPanel>
        </DataTemplate>
    </Window.Resources>
    <Window.InputBindings>
        <KeyBinding Key="G" Modifiers="Control"  Command="{Binding GenerateDBCommand}"/>
        <KeyBinding Key="D1" Modifiers="Control" Command="{Binding SwitchMECommand}" CommandParameter="ME1"/>
        <KeyBinding Key="D2" Modifiers="Control" Command="{Binding SwitchMECommand}" CommandParameter="ME2"/>
        <KeyBinding Key="D3" Modifiers="Control" Command="{Binding SwitchMECommand}" CommandParameter="ME3"/>
        <KeyBinding Key="D4" Modifiers="Control" Command="{Binding SwitchMECommand}" CommandParameter="LE1"/>
        <KeyBinding Key="D5" Modifiers="Control" Command="{Binding SwitchMECommand}" CommandParameter="LE2"/>
        <KeyBinding Key="D6" Modifiers="Control" Command="{Binding SwitchMECommand}" CommandParameter="LE3"/>
    </Window.InputBindings>
    <xctk:BusyIndicator x:Name="dbBusyIndicator" IsBusy="{Binding IsBusy, FallbackValue=False}">
        <DockPanel>
            <DockPanel DockPanel.Dock="Top">
                <xctk:WatermarkTextBox DockPanel.Dock="Right" Watermark="Search" Name="FilterBox" Width="300" KeyUp="FilterBox_KeyUp" ToolTip="Filter and find classes" HorizontalAlignment="Right" HorizontalContentAlignment="Left" IsEnabled="True">
                </xctk:WatermarkTextBox>
                <Menu Name="TopDock">
                    <MenuItem Header="Database" Padding="4" >
                        <MenuItem Header="Generate New Database" Command="{Binding GenerateDBCommand}" InputGestureText="Ctrl+G" ToolTip="Scan Game Properties"/>
                        <MenuItem Header="Save Database" Command="{Binding SaveDBCommand}" ToolTip="Save Database Properties" Visibility="{x:Static global:App.IsDebugVisibility}"/>
                        <Separator />
                        <MenuItem Name="switchME1_menu" Header="ME1 Database" Command="{Binding SwitchMECommand}" CommandParameter="ME1" InputGestureText="Ctrl+1" ToolTip="Switch to ME1 Database">
                            <MenuItem.Icon>
                                <Image Source="\Resources\Images\GameIcons\ME1_48.ico" Width="64"/>
                            </MenuItem.Icon>
                        </MenuItem>
                        <MenuItem Name="switchME2_menu" Header="ME2 Database" Command="{Binding SwitchMECommand}" CommandParameter="ME2" InputGestureText="Ctrl+2" ToolTip="Switch to ME2 Database">
                            <MenuItem.Icon>
                                <Image Source="\Resources\Images\GameIcons\ME2_48.ico" Width="64"/>
                            </MenuItem.Icon>
                        </MenuItem>
                        <MenuItem Name="switchME3_menu" Header="ME3 Database" Command="{Binding SwitchMECommand}" CommandParameter="ME3" InputGestureText="Ctrl+3" ToolTip="Switch to ME3 Database">
                            <MenuItem.Icon>
                                <Image Source="\Resources\Images\GameIcons\ME3_48.ico" Width="64"/>
                            </MenuItem.Icon>
                        </MenuItem>
                        <MenuItem Name="switchLE1_menu" Header="LE1 Database" Command="{Binding SwitchMECommand}" CommandParameter="LE1" InputGestureText="Ctrl+4" ToolTip="Switch to LE1 Database">
                            <MenuItem.Icon>
                                <Image Source="{StaticResource le1gameicon}" Width="64"/>
                            </MenuItem.Icon>
                        </MenuItem>
                        <MenuItem Name="switchLE2_menu" Header="LE2 Database" Command="{Binding SwitchMECommand}" CommandParameter="LE2" InputGestureText="Ctrl+5" ToolTip="Switch to LE2 Database">
                            <MenuItem.Icon>
                                <Image Source="{StaticResource le2gameicon}" Width="64"/>
                            </MenuItem.Icon>
                        </MenuItem>
                        <MenuItem Name="switchLE3_menu" Header="LE3 Database" Command="{Binding SwitchMECommand}" CommandParameter="LE3" InputGestureText="Ctrl+6" ToolTip="Switch to LE3 Database">
                            <MenuItem.Icon>
                                <Image Source="{StaticResource le3gameicon}" Width="64"/>
                            </MenuItem.Icon>
                        </MenuItem>
                    </MenuItem>
                    <MenuItem Header="Tools" Padding="4">
                        <MenuItem Header="Open Definition" Command="{Binding OpenSourcePkgCommand}" ToolTip="Opens this class definition in Package Editor."/>
                        <MenuItem Header="Open Usage" Name="menu_OpenUsage" Command="{Binding OpenUsagePkgCommand}" ToolTip="Opens this Usage in Package Editor." />
                        <MenuItem Header="Go to SuperClass" Command="{Binding GoToSuperclassCommand}" ToolTip="Go to the superclass for more properties."/>
                        <MenuItem Header="Re-save Database without empty lines" Name="menu_SaveXEmptyLines" Command="{Binding SaveDBCommand}" ToolTip="This will save the Database without the lines with no TLK reference." IsEnabled="False"/>
                        <Separator/>
                        <MenuItem Name="menu_fltrCustFiles" Header="Filter by Filelist" Command="{Binding FilterFilesCommand}" CommandParameter="CustFiles" ToolTip="Filter the entire database by the current filelist." StaysOpenOnClick="True" IsCheckable="True" IsChecked="{Binding Path=IsFilteredByFiles, Mode=TwoWay}"/>
                        <MenuItem Header="Filelist Actions">
                            <MenuItem Header="Load" Command="{Binding LoadFileListCommand}" ToolTip="Load an existing filelist."/>
                            <MenuItem Header="Save" Command="{Binding SaveFileListCommand}" ToolTip="Save the current filelist."/>
                            <MenuItem Header="Clear" Command="{Binding EditFileListCommand}" CommandParameter="Clear" ToolTip="Clear the current filelist."/>
                        </MenuItem>
                        <Separator/>
                        <MenuItem Header="Filter Animations">
                            <MenuItem Name="menu_fltrAnim" Header="Only Animations" Command="{Binding FilterAnimsCommand}" CommandParameter="Anim" ToolTip="Show animsequences only." StaysOpenOnClick="True"/>
                            <MenuItem Name="menu_fltrPerf" Header="Only Performances (ME3)" Command="{Binding FilterAnimsCommand}" CommandParameter="Perf" ToolTip="Show ME3 ambient performances only." StaysOpenOnClick="True"/>
                        </MenuItem>
                        <MenuItem Header="Filter Classes">
                            <MenuItem Name="menu_fltrSeq" Header="Only Sequence Classes" Command="{Binding FilterClassCommand}" CommandParameter="Seq" ToolTip="Show sequence classes only." StaysOpenOnClick="True"/>
                            <MenuItem Name="menu_fltrInterp" Header="Only Matinee Classes" Command="{Binding FilterClassCommand}" CommandParameter="Interp" ToolTip="Show matinee classes only." StaysOpenOnClick="True"/>
                        </MenuItem>
                        <MenuItem Header="Filter Materials">
                            <MenuItem Name="menu_fltrMatNoDLC" Header="Hide DLC only Materials" Command="{Binding FilterMatCommand}" CommandParameter="NoDLC" ToolTip="Hide materials that require cooked Shadercaches." StaysOpenOnClick="True"/>
                            <MenuItem Name="menu_fltrMatDecal" Header="Only Decal Materials" Command="{Binding FilterMatCommand}" CommandParameter="Decal" ToolTip="Show materials used in Decals only." StaysOpenOnClick="True"/>
                            <MenuItem Name="menu_fltrMatUnlit" Header="Only Unlit Materials" Command="{Binding FilterMatCommand}" CommandParameter="Unlit" ToolTip="Show Unlit materials only." StaysOpenOnClick="True"/>
                            <MenuItem Name="menu_fltrMatSkM" Header="Hide SkelMesh Exclusive Materials" Command="{Binding FilterMatCommand}" CommandParameter="SkM" ToolTip="Hide materials that require Skeleton meshes." StaysOpenOnClick="True"/>
                            <Separator/>
                            <MenuItem Name="menu_fltrMatTrans" Header="Only Translucent Materials" Command="{Binding FilterMatCommand}" CommandParameter="Transl" ToolTip="Show translucent materials only." StaysOpenOnClick="True"/>
                            <MenuItem Name="menu_fltrMatAdd" Header="Only Additive Materials" Command="{Binding FilterMatCommand}" CommandParameter="BAdd" ToolTip="Show additive materials only." StaysOpenOnClick="True"/>
                            <MenuItem Name="menu_fltrMatOpq" Header="Only Opaque Materials" Command="{Binding FilterMatCommand}" CommandParameter="Opq" ToolTip="Show opaque materials only." StaysOpenOnClick="True"/>
                            <Separator/>
                            <MenuItem Name="menu_fltrMat2side" Header="Only 2 sided Materials" Command="{Binding FilterMatCommand}" CommandParameter="Twoside" ToolTip="Show 2 sided materials only." StaysOpenOnClick="True"/>
                            <MenuItem Name="menu_fltrMat1side" Header="Only Backface culled (1 side)" Command="{Binding FilterMatCommand}" CommandParameter="Oneside" ToolTip="Show 1 sided materials only." StaysOpenOnClick="True"/>
                            <Separator/>
                            <MenuItem Name="menu_fltrMatColor" Header="Must have color setting" Command="{Binding FilterMatCommand}" CommandParameter="Vcolor" ToolTip="Show if has color parameter" StaysOpenOnClick="True"/>
                            <MenuItem Name="menu_fltrMatText" Header="Must have texture setting" Command="{Binding FilterMatCommand}" CommandParameter="TextP" ToolTip="Show only if has texture parameter." StaysOpenOnClick="True"/>
                            <MenuItem Name="menu_fltrMatTalk" Header="Must have talk scalar setting" Command="{Binding FilterMatCommand}" CommandParameter="TalkS" ToolTip="Show only if has talk scalar." StaysOpenOnClick="True"/>
                        </MenuItem>
                        <MenuItem Header="Filter Meshes">
                            <MenuItem Name="menu_fltrSkM" Header="Only Skeleton Meshes" Command="{Binding FilterMeshCommand}" CommandParameter="Skel" ToolTip="Show Skeleton Meshes only." StaysOpenOnClick="True"/>
                            <MenuItem Name="menu_fltrStM" Header="Only Static Meshes" Command="{Binding FilterMeshCommand}" CommandParameter="Static" ToolTip="Show Static Meshes only." StaysOpenOnClick="True"/>
                        </MenuItem>
                        <MenuItem Header="Filter Textures">
                            <MenuItem Name="menu_TCube" Header="Only TextureCubes" Command="{Binding FilterTexCommand}" CommandParameter="Cube" ToolTip="Show Texture Cubes only." StaysOpenOnClick="True"/>
                            <MenuItem Name="menu_TMovie" Header="Only TextureMovies" Command="{Binding FilterTexCommand}" CommandParameter="Movie" ToolTip="Show Texture Movies only." StaysOpenOnClick="True"/>
                            <Separator/>
                            <MenuItem Name="menu_T1024" Header="Only Textures 1024 or larger" Command="{Binding FilterTexCommand}" CommandParameter="1024" ToolTip="Show Textures with size 1024 or greater." StaysOpenOnClick="True"/>
                            <MenuItem Name="menu_T4096" Header="Only Textures 4096 or larger" Command="{Binding FilterTexCommand}" CommandParameter="4096" ToolTip="Show Textures with size 4096 or greater." StaysOpenOnClick="True"/>
                            <Separator/>
                            <MenuItem Header="Filter LODGroups">
                                <MenuItem Name="menu_TGWorld" Header="World" Command="{Binding FilterTexCommand}" CommandParameter="LODG" ToolTip="Show Textures with LODGroup World." StaysOpenOnClick="True" IsCheckable="True" IsChecked="True"/>
                                <MenuItem Name="menu_TGWorldSpec" Header="WorldSpecular" Command="{Binding FilterTexCommand}" CommandParameter="LODG" ToolTip="Show Textures with LODGroup WorldSpecular." StaysOpenOnClick="True" IsCheckable="True" IsChecked="True"/>
                                <MenuItem Name="menu_TGWorldNorm" Header="WorldNormalMap" Command="{Binding FilterTexCommand}" CommandParameter="LODG" ToolTip="Show Textures with LODGroup WorldNormalMap." StaysOpenOnClick="True" IsCheckable="True" IsChecked="True"/>
                                <MenuItem Name="menu_TGAmblgtMap" Header="AmbientLightMap" Command="{Binding FilterTexCommand}" CommandParameter="LODG" ToolTip="Show Textures with LODGroup AmbientLightMap." StaysOpenOnClick="True" IsCheckable="True" IsChecked="True"/>
                                <MenuItem Name="menu_TGShadowMap" Header="ShadowMap" Command="{Binding FilterTexCommand}" CommandParameter="LODG" ToolTip="Show Textures with LODGroup ShadowMap." StaysOpenOnClick="True" IsCheckable="True" IsChecked="True"/>
                                <MenuItem Name="menu_TGEnviro64" Header="Environment_64" Command="{Binding FilterTexCommand}" CommandParameter="LODG" ToolTip="Show Textures with LODGroup Environment_64." StaysOpenOnClick="True" IsCheckable="True" IsChecked="True"/>
                                <MenuItem Name="menu_TGEnviro128" Header="Environment_128" Command="{Binding FilterTexCommand}" CommandParameter="LODG" ToolTip="Show Textures with LODGroup Environment_128." StaysOpenOnClick="True" IsCheckable="True" IsChecked="True"/>
                                <MenuItem Name="menu_TGEnviro256" Header="Environment_256" Command="{Binding FilterTexCommand}" CommandParameter="LODG" ToolTip="Show Textures with LODGroup Environment_256." StaysOpenOnClick="True" IsCheckable="True" IsChecked="True"/>
                                <MenuItem Name="menu_TGEnviro512" Header="Environment_512" Command="{Binding FilterTexCommand}" CommandParameter="LODG" ToolTip="Show Textures with LODGroup Environment_512." StaysOpenOnClick="True" IsCheckable="True" IsChecked="True"/>
                                <MenuItem Name="menu_TGEnviro1024" Header="Environment_1024" Command="{Binding FilterTexCommand}" CommandParameter="LODG" ToolTip="Show Textures with LODGroup Environment_1024." StaysOpenOnClick="True" IsCheckable="True" IsChecked="True"/>
                                <MenuItem Name="menu_TGVFX64" Header="VFX_64" Command="{Binding FilterTexCommand}" CommandParameter="LODG" ToolTip="Show Textures with LODGroup VFX_64." StaysOpenOnClick="True" IsCheckable="True" IsChecked="True"/>
                                <MenuItem Name="menu_TGVFX128" Header="VFX_128" Command="{Binding FilterTexCommand}" CommandParameter="LODG" ToolTip="Show Textures with LODGroup VFX_128." StaysOpenOnClick="True" IsCheckable="True" IsChecked="True"/>
                                <MenuItem Name="menu_TGVFX256" Header="VFX_256" Command="{Binding FilterTexCommand}" CommandParameter="LODG" ToolTip="Show Textures with LODGroup VFX_256." StaysOpenOnClick="True" IsCheckable="True" IsChecked="True"/>
                                <MenuItem Name="menu_TGVFX512" Header="VFX_512" Command="{Binding FilterTexCommand}" CommandParameter="LODG" ToolTip="Show Textures with LODGroup VFX_512." StaysOpenOnClick="True" IsCheckable="True" IsChecked="True"/>
                                <MenuItem Name="menu_TGVFX1024" Header="VFX_1024" Command="{Binding FilterTexCommand}" CommandParameter="LODG" ToolTip="Show Textures with LODGroup VFX_1024." StaysOpenOnClick="True" IsCheckable="True" IsChecked="True"/>
                                <MenuItem Name="menu_TGAPL64" Header="APL_64" Command="{Binding FilterTexCommand}" CommandParameter="LODG" ToolTip="Show Textures with LODGroup APL_64." StaysOpenOnClick="True" IsCheckable="True" IsChecked="True"/>
                                <MenuItem Name="menu_TGAPL128" Header="APL_128" Command="{Binding FilterTexCommand}" CommandParameter="LODG" ToolTip="Show Textures with LODGroup APL_128." StaysOpenOnClick="True" IsCheckable="True" IsChecked="True"/>
                                <MenuItem Name="menu_TGAPL256" Header="APL_256" Command="{Binding FilterTexCommand}" CommandParameter="LODG" ToolTip="Show Textures with LODGroup APL_256." StaysOpenOnClick="True" IsCheckable="True" IsChecked="True"/>
                                <MenuItem Name="menu_TGAPL512" Header="APL_512" Command="{Binding FilterTexCommand}" CommandParameter="LODG" ToolTip="Show Textures with LODGroup APL_512." StaysOpenOnClick="True" IsCheckable="True" IsChecked="True"/>
                                <MenuItem Name="menu_TGAPL1024" Header="APL_1024" Command="{Binding FilterTexCommand}" CommandParameter="LODG" ToolTip="Show Textures with LODGroup APL_1024." StaysOpenOnClick="True" IsCheckable="True" IsChecked="True"/>
                                <MenuItem Name="menu_TGUI" Header="UI" Command="{Binding FilterTexCommand}" CommandParameter="LODG" ToolTip="Show Textures with LODGroup UI." StaysOpenOnClick="True" IsCheckable="True" IsChecked="True"/>
                                <MenuItem Name="menu_TGPromo" Header="Promotional" Command="{Binding FilterTexCommand}" CommandParameter="LODG" ToolTip="Show Textures with LODGroup Promotional." StaysOpenOnClick="True" IsCheckable="True" IsChecked="True"/>
                                <MenuItem Name="menu_TGChar1024" Header="Character_1024" Command="{Binding FilterTexCommand}" CommandParameter="LODG" ToolTip="Show Textures with LODGroup Character_1024." StaysOpenOnClick="True" IsCheckable="True" IsChecked="True"/>
                                <MenuItem Name="menu_TGCharDiff" Header="CharacterDiff" Command="{Binding FilterTexCommand}" CommandParameter="LODG" ToolTip="Show Textures with LODGroup CharacterDiff." StaysOpenOnClick="True" IsCheckable="True" IsChecked="True"/>
                                <MenuItem Name="menu_TGCharNorm" Header="CharacterNorm" Command="{Binding FilterTexCommand}" CommandParameter="LODG" ToolTip="Show Textures with LODGroup CharacterNorm." StaysOpenOnClick="True" IsCheckable="True" IsChecked="True"/>
                                <MenuItem Name="menu_TGCharSpec" Header="CharacterSpec" Command="{Binding FilterTexCommand}" CommandParameter="LODG" ToolTip="Show Textures with LODGroup CharacterSpec." StaysOpenOnClick="True" IsCheckable="True" IsChecked="True"/>
                                <MenuItem Name="menu_TGNone" Header="None" Command="{Binding FilterTexCommand}" CommandParameter="LODG" ToolTip="Show Textures with no LODGroup." StaysOpenOnClick="True" IsCheckable="True" IsChecked="True"/>
                                <Separator/>
                                <MenuItem Name="menu_TGShow" Header="Show all" Command="{Binding FilterTexCommand}" CommandParameter="TGShow" ToolTip="Show All TextureGroups." StaysOpenOnClick="True"/>
                                <MenuItem Name="menu_TGClear" Header="Clear all" Command="{Binding FilterTexCommand}" CommandParameter="TGClear" ToolTip="Hide All TextureGroups." StaysOpenOnClick="True"/>
                            </MenuItem>
                        </MenuItem>
                        <MenuItem Header="Filter VFX">
                            <MenuItem Name="menu_VFXPartSys" Header="Only Particle Systems" Command="{Binding FilterVFXCommand}" CommandParameter="PS" ToolTip="Show Particle Systems only." StaysOpenOnClick="True"/>
                            <MenuItem Name="menu_VFXRvrEff" Header="Only Client Effects" Command="{Binding FilterVFXCommand}" CommandParameter="RvrEff" ToolTip="Show Receiver Effects only." StaysOpenOnClick="True"/>
                        </MenuItem>
                        <Separator/>
                        <MenuItem Name="menu_checkCRC" Header="Compile Texture CRCs" Command="{Binding SetCRCCommand}" IsChecked="False" ToolTip="Add CRC generation during scan. Will significantly increase scan time."/>
                        <MenuItem Name="menu_checkConv" Header="Compile BioConversations" IsChecked="{Binding ParseConvos, Mode=TwoWay}" IsCheckable="True" StaysOpenOnClick="True" ToolTip="Add conversation and line parsing. Will significantly increase scan time, and database loading."/>
                        <MenuItem Name="menu_checkPlotUsages" Header="Compile Plot Usages" IsChecked="{Binding ParsePlotUsages, Mode=TwoWay}" IsCheckable="True" StaysOpenOnClick="True" ToolTip="Includes plot variable usages in database. Will significantly increase scan time, and database loading."/>
                        <MenuItem Header="Scan Localization" ItemsSource="{Binding AvailableLocalizations}">
                            <MenuItem.ItemContainerStyle>
                                <Style TargetType="{x:Type MenuItem}">
                                    <Setter Property="Header" Value="{Binding}"/>
                                    <Setter Property="StaysOpenOnClick" Value="True" />
                                    <Setter Property="Command" Value="{Binding ChangeLocalizationCommand, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=Window}}"/>
                                    <Setter Property="CommandParameter" Value="{Binding Mode=OneWay}" />
                                    <Setter Property="IsChecked">
                                        <Setter.Value>
                                            <MultiBinding Converter="{StaticResource MultiEnumComparisonConverter}">
                                                <Binding Mode="OneWay"/>
                                                <Binding Path="Localization" Mode="OneWay" RelativeSource="{RelativeSource FindAncestor, AncestorType=Window}" />
                                            </MultiBinding>
                                        </Setter.Value>
                                    </Setter>
                                </Style>
                            </MenuItem.ItemContainerStyle>
                        </MenuItem>
                    </MenuItem>
                </Menu>
            </DockPanel>
            <StatusBar Height="23" DockPanel.Dock="Bottom" >
                <sharedToolControls:StatusBarGameIDIndicator GameType="{Binding CurrentGame}" VerticalContentAlignment="Center" Visibility="Visible" Margin="3,-4,3,-4" DockPanel.Dock="Left" />
                <StatusBarItem>
                    <TextBlock x:Name="StatusBar_LeftMostText" Text="{Binding CurrentOverallOperationText}"/>
                </StatusBarItem>
                <StatusBarItem HorizontalContentAlignment="Right" HorizontalAlignment="Right">
                    <TextBlock x:Name="StatusBar_RightMostText" Margin="2,0,2,0" Foreground="Gray">
                                <Run Text="v"/><Run Text="{x:Static assetDatabase:AssetDatabaseWindow.dbCurrentBuild}"/>
                    </TextBlock>
                </StatusBarItem>
            </StatusBar>
            <DockPanel Name="MidDock">
                <TabControl SelectedIndex="{Binding currentView, Mode=TwoWay}" SelectionChanged="TabControl_SelectionChanged">
                    <!-- FileList -->
                    <TabItem Header="Files" TabIndex="0">
                        <DockPanel DockPanel.Dock="Left" MinWidth="300">
                            <DockPanel LastChildFill="True">
                                <TextBlock Text="All game files (right click to open in various tools)" Background="AliceBlue" HorizontalAlignment="Stretch" Padding="3" ToolTip="All the files in the game" DockPanel.Dock="Top"/>
                                <Expander Name="expander_CustomFiles" DockPanel.Dock="Right" MaxWidth="300" ExpandDirection="Left" IsExpanded="False" Background="Orange" Padding="2" >
                                    <Expander.Header>
                                        <TextBlock Text="Custom File List" Background="Orange" VerticalAlignment="Stretch" TextAlignment="Center" Padding="3" DockPanel.Dock="Right" ToolTip="{x:Static assetDatabase:AssetDatabaseWindow.CustomListDesc}">
                                            <TextBlock.LayoutTransform>
                                                <RotateTransform Angle="-90"/>
                                            </TextBlock.LayoutTransform>
                                        </TextBlock>
                                    </Expander.Header>
                                    <DockPanel LastChildFill="True" DockPanel.Dock="Left">
                                        <StackPanel DockPanel.Dock="Top">
                                            <Border BorderBrush="Black" BorderThickness="1" >
                                                <TextBlock Padding="3" FontSize="11" TextAlignment="Center" Background="AliceBlue" TextWrapping="WrapWithOverflow">
                                                <Run Text="{x:Static assetDatabase:AssetDatabaseWindow.CustomListDesc}"/>
                                                </TextBlock>
                                            </Border>
                                            <Grid HorizontalAlignment="Stretch">
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="*"/>
                                                    <ColumnDefinition Width="*"/>
                                                    <ColumnDefinition Width="*"/>
                                                    <ColumnDefinition Width="*"/>
                                                </Grid.ColumnDefinitions>
                                                <Grid.RowDefinitions>
                                                    <RowDefinition Height="25"/>
                                                </Grid.RowDefinitions>
                                                <ToggleButton x:Name="btn_custFilter" Content="Filter" Command="{Binding FilterFilesCommand}" CommandParameter="CustFiles" ToolTip="Filter the entire database by the current filelist." MinWidth="20" ClickMode="Release" IsChecked="{Binding IsFilteredByFiles}" Grid.Column="0"/>
                                                <Button Content="Load" MaxHeight="40" Command="{Binding LoadFileListCommand}" ToolTip="Load custom file list" ClickMode="Release" Grid.Column="1"/>
                                                <Button Content="Save" MaxHeight="40" Command="{Binding SaveFileListCommand}" ToolTip="Save custom file list" ClickMode="Release" Grid.Column="2"/>
                                                <Button Content="Clear" MaxHeight="40" Command="{Binding EditFileListCommand}" CommandParameter="Clear" ToolTip="Save custom file list" ClickMode="Release" Grid.Column="3"/>
                                            </Grid>
                                        </StackPanel>
                                        <controls:ListBoxScroll x:Name="lstbx_CustomFiles" ItemsSource="{Binding CustomFileList}" MinWidth="200"
                                                                DockPanel.Dock="Bottom">
                                            <controls:ListBoxScroll.ContextMenu>
                                                <ContextMenu>
                                                    <MenuItem Header="Remove From Custom List" Command="{Binding EditFileListCommand}" CommandParameter="Remove" ToolTip="Remove this from Custom File List" />
                                                </ContextMenu>
                                            </controls:ListBoxScroll.ContextMenu>
                                            <controls:ListBoxScroll.ItemTemplate>
                                                <DataTemplate>
                                                    <TextBlock Text="{Binding Path=Value}"/>
                                                </DataTemplate>
                                            </controls:ListBoxScroll.ItemTemplate>
                                        </controls:ListBoxScroll>
                                    </DockPanel>
                                </Expander>
                                <ListView x:Name="lstbx_Files" DockPanel.Dock="Bottom" MinWidth="300" ItemsSource="{Binding Path=FileListExtended}" GridViewColumnHeader.Click="views_ColumnHeader_Click">
                                    <ListView.View>
                                        <GridView ColumnHeaderContainerStyle="{StaticResource FileLVHeader}">
                                            <GridViewColumn DisplayMemberBinding="{Binding FileName}" Width="260" Header="File"/>
                                            <GridViewColumn DisplayMemberBinding="{Binding Directory}" Width="360" Header="Source (Basegame, DLC or Mod directory)" />
                                            <GridViewColumn DisplayMemberBinding="{Binding Mount}" Width="360" Header="Mount"/>
                                        </GridView>
                                    </ListView.View>
                                    <ListView.ContextMenu>
                                        <ContextMenu>
                                            <MenuItem Header="Open in Package Editor" Command="{Binding OpenUsagePkgCommand}" ToolTip="Opens this file in Package Editor.">
                                                <MenuItem.Icon>
                                                    <Image Source="{StaticResource iconPackageEditor16}" Width="64"/>
                                                </MenuItem.Icon>
                                            </MenuItem>
                                            <MenuItem Header="Open in Sequence Editor" Command="{Binding OpenUsagePkgCommand}" CommandParameter="SeqEd" ToolTip="Opens this file in Sequence Editor.">
                                                <MenuItem.Icon>
                                                    <Image Source="{StaticResource iconSequenceEditor16}" Width="64"/>
                                                </MenuItem.Icon>
                                            </MenuItem>
                                            <MenuItem Header="Open in Meshplorer" Command="{Binding OpenUsagePkgCommand}" CommandParameter="Meshplorer" ToolTip="Opens this file in Meshplorer Editor.">
                                                <MenuItem.Icon>
                                                    <Image Source="{StaticResource iconMeshplorer16}" Width="64"/>
                                                </MenuItem.Icon>
                                            </MenuItem>
                                            <MenuItem Header="Open in Pathfinding Editor" Command="{Binding OpenUsagePkgCommand}" CommandParameter="PathEd" ToolTip="Opens this file in Pathfinding Editor.">
                                                <MenuItem.Icon>
                                                    <Image Source="{StaticResource iconPathfindingEditor16}" Width="64"/>
                                                </MenuItem.Icon>
                                            </MenuItem>
                                            <MenuItem Header="Open in Dialogue Editor" Command="{Binding OpenUsagePkgCommand}" CommandParameter="DlgEd" ToolTip="Opens this file in Dialogue Editor.">
                                                <MenuItem.Icon>
                                                    <Image Source="{StaticResource iconDialogueEditor16}" Width="64"/>
                                                </MenuItem.Icon>
                                            </MenuItem>
                                            <MenuItem Header="Open in Sound Explorer" Command="{Binding OpenUsagePkgCommand}" CommandParameter="SoundExplorer" ToolTip="Opens this file in Sound Explorer.">
                                                <MenuItem.Icon>
                                                    <Image Source="{StaticResource iconSoundplorer16}" Width="64"/>
                                                </MenuItem.Icon>
                                            </MenuItem>
                                            <Separator/>
                                            <MenuItem Header="Add to Filtered Files" Command="{Binding EditFileListCommand}" CommandParameter="Add" ToolTip="Add this file to the filtered file list."/>
                                            <MenuItem Header="Open in Windows Explorer" Command="{Binding OpenInWindowsExplorerCommand}" ToolTip="Opens this file in Windows Explorer."/>
                                        </ContextMenu>
                                    </ListView.ContextMenu>
                                </ListView>
                            </DockPanel>
                        </DockPanel>
                    </TabItem>
                    <!-- Classes-->
                    <TabItem Header="Classes" TabIndex="1">
                        <DockPanel>
                            <Grid DockPanel.Dock="Left">
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="24"/>
                                    <RowDefinition Height="*"/>
                                </Grid.RowDefinitions>
                                <TextBlock Text="Class Records" Background="AliceBlue" HorizontalAlignment="Stretch" Padding="3" Grid.Row="0" ToolTip="Unreal classes"/>
                                <controls:ListBoxScroll x:Name="lstbx_Classes"  MinWidth="300" ItemsSource="{Binding Path=CurrentDataBase.ClassRecords}" Grid.Row="1"
                                                        SelectedItem="{Binding SelectedClass}">
                                    <controls:ListBoxScroll.ItemTemplate>
                                        <DataTemplate>
                                            <StackPanel Orientation="Horizontal">
                                                <TextBlock Text="{Binding Class}" />
                                                <TextBlock FontSize="10" Text=" (" VerticalAlignment="Center" Visibility="{x:Static global:App.IsDebugVisibility}"/>
                                                <TextBlock FontSize="10" Text="{Binding Path=Usages.Count}" VerticalAlignment="Center" Visibility="{x:Static global:App.IsDebugVisibility}"/>
                                                <TextBlock FontSize="10" Text=" , " VerticalAlignment="Center" Visibility="{x:Static global:App.IsDebugVisibility}"/>
                                                <TextBlock FontSize="10" Text="{Binding Path=SuperClass}" VerticalAlignment="Center" Visibility="{x:Static global:App.IsDebugVisibility}"/>
                                                <TextBlock FontSize="10" Text=" , " VerticalAlignment="Center" Visibility="{x:Static global:App.IsDebugVisibility}"/>
                                                <TextBlock FontSize="10" Text="{Binding Path=DefinitionFile}" VerticalAlignment="Center" Visibility="{x:Static global:App.IsDebugVisibility}"/>
                                                <TextBlock FontSize="10" Text=" #" VerticalAlignment="Center" Visibility="{x:Static global:App.IsDebugVisibility}"/>
                                                <TextBlock FontSize="10" Text="{Binding Path=Definition_UID}" VerticalAlignment="Center" Visibility="{x:Static global:App.IsDebugVisibility}"/>
                                                <TextBlock FontSize="10" Text=")" VerticalAlignment="Center" Visibility="{x:Static global:App.IsDebugVisibility}"/>
                                            </StackPanel>
                                        </DataTemplate>
                                    </controls:ListBoxScroll.ItemTemplate>
                                    <controls:ListBoxScroll.ItemContainerStyle>
                                        <Style TargetType="ListBoxItem">
                                            <Style.Triggers>
                                                <DataTrigger Binding="{Binding Path=IsModOnly}" Value="True">
                                                    <Setter Property="Foreground" Value="IndianRed"/>
                                                    <Setter Property="TextElement.ToolTip" Value="Mod - this class is only used by Mods"/>
                                                </DataTrigger>
                                            </Style.Triggers>
                                        </Style>
                                    </controls:ListBoxScroll.ItemContainerStyle>
                                    <controls:ListBoxScroll.ContextMenu>
                                        <ContextMenu>
                                            <MenuItem Header="Open Class Definition" Command="{Binding OpenSourcePkgCommand}" ToolTip="Opens this class definition in Package Editor" />
                                            <MenuItem Header="Go to SuperClass" Command="{Binding GoToSuperclassCommand}" ToolTip="Go to the superclass for more properties"/>
                                        </ContextMenu>
                                    </controls:ListBoxScroll.ContextMenu>
                                </controls:ListBoxScroll>
                            </Grid>
                            <Grid>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="24"/>
                                    <RowDefinition Height="*"/>
                                </Grid.RowDefinitions>
                                <TextBlock Text="Properties" Background="AliceBlue" HorizontalAlignment="Stretch" Padding="3" Grid.Row="0" ToolTip="Properties of this class that are used in game"/>
                                <controls:ListBoxScroll x:Name="lstbx_Properties" MinWidth="200" ItemsSource="{Binding Source={StaticResource PropertyContentView} }"
                                                        ItemTemplate="{StaticResource PropertyTemplate}" Grid.Row="1" >
                                    <controls:ListBoxScroll.ContextMenu>
                                        <ContextMenu>
                                            <MenuItem Header="Open Class Definition" Command="{Binding OpenSourcePkgCommand}" ToolTip="Opens this class definition in Package Editor" />
                                            <MenuItem Header="Go to SuperClass" Command="{Binding GoToSuperclassCommand}" ToolTip="Go to the superclass for more properties."/>
                                        </ContextMenu>
                                    </controls:ListBoxScroll.ContextMenu>
                                </controls:ListBoxScroll>
                            </Grid>
                            <Grid DockPanel.Dock="Right">
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="24"/>
                                    <RowDefinition Height="*"/>
                                </Grid.RowDefinitions>
                                <StackPanel Orientation="Horizontal" Grid.Row="0" Background="AliceBlue">
                                    <TextBlock Text="Usages (Bold is default class settings)"  HorizontalAlignment="Stretch" Padding="3"
                                               ToolTip="Shows all the files that use this class, and the first export number&#x0a;Right click to open in Package Editor" />
                                    <CheckBox x:Name="allClassInstancesCheckBox" Content="Show multiple per file" IsChecked="{Binding ShowAllClassUsages}" 
                                              Margin="5, 2, 0, 0" VerticalContentAlignment="Top"/>
                                </StackPanel>
                                <controls:ListBoxScroll x:Name="lstbx_Usages" MinWidth="200" ItemsSource="{Binding SelectedClassUsages}" Grid.Row="1" >
                                    <controls:ListBoxScroll.ItemTemplate>
                                        <DataTemplate>
                                            <TextBlock>
                                                <TextBlock.Text>
                                                    <MultiBinding Converter="{StaticResource FileIndexToNameConverter}">
                                                        <Binding Path="FileKey"/>
                                                        <Binding Path="FileListExtended" RelativeSource="{RelativeSource Mode=FindAncestor, AncestorType={x:Type Window}}"/>
                                                        <Binding Path="UIndex"/>
                                                    </MultiBinding>
                                                </TextBlock.Text>
                                            </TextBlock>
                                        </DataTemplate>
                                    </controls:ListBoxScroll.ItemTemplate>
                                    <controls:ListBoxScroll.ItemContainerStyle>
                                        <Style TargetType="ListBoxItem">
                                            <Style.Triggers>
                                                <DataTrigger Binding="{Binding Path=IsDefault}" Value="True">
                                                    <Setter Property="TextElement.FontWeight" Value="Bold"/>
                                                    <Setter Property="TextElement.ToolTip" Value="Default value"/>
                                                </DataTrigger>
                                                <DataTrigger Binding="{Binding Path=IsMod}" Value="True">
                                                    <Setter Property="TextElement.Foreground" Value="IndianRed"/>
                                                    <Setter Property="TextElement.ToolTip" Value="Is Mod File"/>
                                                </DataTrigger>
                                            </Style.Triggers>
                                        </Style>
                                    </controls:ListBoxScroll.ItemContainerStyle>
                                    <controls:ListBoxScroll.ContextMenu>
                                        <ContextMenu>
                                            <MenuItem Header="Open Usage" Command="{Binding OpenUsagePkgCommand}" ToolTip="Opens this Usage in Package Editor" />
                                            <MenuItem Header="Open Class Definition" Command="{Binding OpenSourcePkgCommand}" ToolTip="Opens this class definition in Package Editor" />
                                            <MenuItem Header="Go to SuperClass" Command="{Binding GoToSuperclassCommand}" ToolTip="Go to the superclass for more properties"/>
                                        </ContextMenu>
                                    </controls:ListBoxScroll.ContextMenu>
                                </controls:ListBoxScroll>
                            </Grid>
                        </DockPanel>
                    </TabItem>
                    <!-- Materials -->
                    <TabItem Header="Materials" TabIndex="2">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="24"/>
                                <RowDefinition Height="*"/>
                            </Grid.RowDefinitions>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition MinWidth="400" Width="*"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <TextBlock Text="Material Records" Background="AliceBlue" HorizontalAlignment="Stretch" Padding="3" ToolTip="Material Records (Grey shows DLC only materials that require a shadercache)" Grid.Row="0" Grid.Column="0"/>
                            <controls:ListBoxScroll x:Name="lstbx_Materials" MinWidth="300" ItemsSource="{Binding Path=CurrentDataBase.Materials}" Grid.Row="1" Grid.Column="0" >
                                <controls:ListBoxScroll.ItemTemplate>
                                    <DataTemplate>
                                        <StackPanel Orientation="Horizontal">
                                            <TextBlock Text="{Binding MaterialName}" />
                                            <TextBlock FontSize="10" Text=" (" VerticalAlignment="Center"/>
                                            <TextBlock FontSize="10" Text="{Binding ParentPackage}" VerticalAlignment="Center"/>
                                            <TextBlock FontSize="10" Text=")" VerticalAlignment="Center" />
                                        </StackPanel>
                                    </DataTemplate>
                                </controls:ListBoxScroll.ItemTemplate>
                                <controls:ListBoxScroll.ItemContainerStyle>
                                    <Style TargetType="ListBoxItem">
                                        <Style.Triggers>
                                            <DataTrigger Binding="{Binding Path=IsDLCOnly}" Value="True">
                                                <Setter Property="Background" Value="LightGray"/>
                                                <Setter Property="TextElement.ToolTip" Value="DLC - Requires ShaderCache"/>
                                            </DataTrigger>
                                        </Style.Triggers>
                                    </Style>
                                </controls:ListBoxScroll.ItemContainerStyle>
                            </controls:ListBoxScroll>
                            <TextBlock Text="Properties" Background="AliceBlue" HorizontalAlignment="Stretch" Padding="3" ToolTip="The default properties of the material" Grid.Row="0"  Grid.Column="1"/>
                            <controls:ListBoxScroll x:Name="lstbx_MatProps" MinWidth="200" ItemsSource="{Binding SelectedItem.MatSettings, ElementName=lstbx_Materials }" Grid.Row="1" Grid.Column="1">
                                <controls:ListBoxScroll.ItemTemplate>
                                    <DataTemplate>
                                        <StackPanel Orientation="Horizontal">
                                            <TextBlock Text="{Binding Name}" />
                                            <TextBlock FontSize="10" Text=" (" VerticalAlignment="Center"/>
                                            <TextBlock FontSize="10" Text="{Binding Parm1}" VerticalAlignment="Center"/>
                                            <TextBlock FontSize="10" Text=")  " VerticalAlignment="Center" />
                                            <TextBlock Text="{Binding Parm2}" VerticalAlignment="Center"/>
                                        </StackPanel>
                                    </DataTemplate>
                                </controls:ListBoxScroll.ItemTemplate>
                            </controls:ListBoxScroll>
                            <TextBlock Text="Usages" Background="AliceBlue" HorizontalAlignment="Stretch" Padding="3" ToolTip="All the files that use the material (grey is official DLC w shadercache)&#x0a;Right click to open in Package Editor" Grid.Row="0" Grid.Column="2"/>
                            <controls:ListBoxScroll x:Name="lstbx_MatUsages" DockPanel.Dock="Right" MinWidth="200" ItemsSource="{Binding SelectedItem.Usages, ElementName=lstbx_Materials}" Grid.Row="1" Grid.Column="2">
                                <controls:ListBoxScroll.ItemTemplate>
                                    <DataTemplate>
                                        <TextBlock>
                                            <TextBlock.Text>
                                                <MultiBinding Converter="{StaticResource FileIndexToNameConverter}">
                                                    <Binding Path="FileKey"/>
                                                    <Binding Path="FileListExtended" RelativeSource="{RelativeSource Mode=FindAncestor, AncestorType={x:Type Window}}"/>
                                                    <Binding Path="UIndex"/>
                                                </MultiBinding>
                                            </TextBlock.Text>
                                        </TextBlock>
                                    </DataTemplate>
                                </controls:ListBoxScroll.ItemTemplate>
                                <controls:ListBoxScroll.ItemContainerStyle>
                                    <Style TargetType="ListBoxItem">
                                        <Style.Triggers>
                                            <DataTrigger Binding="{Binding Path=IsInDLC}" Value="True">
                                                <Setter Property="Background" Value="LightGray"/>
                                                <Setter Property="TextElement.ToolTip" Value="DLC - Requires ShaderCache"/>
                                            </DataTrigger>
                                        </Style.Triggers>
                                    </Style>
                                </controls:ListBoxScroll.ItemContainerStyle>
                                <controls:ListBoxScroll.ContextMenu>
                                    <ContextMenu>
                                        <MenuItem Header="Open Usage" Command="{Binding OpenUsagePkgCommand}" ToolTip="Opens this Usage in Package Editor." />
                                    </ContextMenu>
                                </controls:ListBoxScroll.ContextMenu>
                            </controls:ListBoxScroll>
                        </Grid>
                    </TabItem>
                    <!-- Meshes -->
                    <TabItem Header="Meshes" TabIndex="3">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="24"/>
                                <RowDefinition Height="*"/>
                            </Grid.RowDefinitions>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition MinWidth="200" Width="20*"/>
                                <ColumnDefinition MinWidth="400" Width="30*"/>
                                <ColumnDefinition Width="15*"/>
                            </Grid.ColumnDefinitions>
                            <TextBlock Text="Meshes" Background="AliceBlue" HorizontalAlignment="Stretch" Padding="3" ToolTip="Meshes within the game" Grid.Row="0" Grid.Column="0"/>
                            <controls:ListBoxScroll x:Name="lstbx_Meshes" MinWidth="300" ItemsSource="{Binding Path=CurrentDataBase.Meshes}" SelectionChanged="lstbx_Meshes_SelectionChanged" Grid.Row="1" Grid.Column="0">
                                <controls:ListBoxScroll.ItemTemplate>
                                    <DataTemplate>
                                        <StackPanel Orientation="Horizontal">
                                            <TextBlock Text="{Binding MeshName}" />
                                            <StackPanel Orientation="Horizontal" Name="details_skelmesh" Visibility="{Binding IsSkeleton, Converter={StaticResource BoolToVisibilityConverter}}">
                                                <TextBlock FontSize="10" Text=" (Skeletal Mesh " VerticalAlignment="Center"/>
                                                <TextBlock FontSize="10" Text=", Bone Count: " VerticalAlignment="Center" />
                                                <TextBlock FontSize="10" Text="{Binding BoneCount}" VerticalAlignment="Center" />
                                                <TextBlock FontSize="10" Text=")  " VerticalAlignment="Center" />
                                            </StackPanel>
                                        </StackPanel>
                                    </DataTemplate>
                                </controls:ListBoxScroll.ItemTemplate>
                                <controls:ListBoxScroll.ItemContainerStyle>
                                    <Style TargetType="ListBoxItem">
                                        <Style.Triggers>
                                            <DataTrigger Binding="{Binding Path=IsModOnly}" Value="True">
                                                <Setter Property="Foreground" Value="IndianRed"/>
                                                <Setter Property="TextElement.ToolTip" Value="Mod - Mesh comes from a mod"/>
                                            </DataTrigger>
                                        </Style.Triggers>
                                    </Style>
                                </controls:ListBoxScroll.ItemContainerStyle>
                            </controls:ListBoxScroll>
                            <TextBlock Text="Viewer" Background="AliceBlue" HorizontalAlignment="Stretch" Padding="3" ToolTip="Toggle the viewer on or off" Grid.Row="0" Grid.Column="1"/>
                            <Border BorderBrush="LightSlateGray" BorderThickness="0.7" Grid.Row="1" Grid.Column="1">
                                <DockPanel x:Name="details_Mesh" MinWidth="350" Margin="3" >
                                    <ToggleButton x:Name="btn_MeshRenderToggle" Content="Toggle Mesh Rendering" DockPanel.Dock="Bottom" MaxHeight="30" ClickMode="Release" Click="btn_MeshRenderToggle_Click" IsChecked="False"></ToggleButton>
                                    <exportLoaderControls:MeshRenderer x:Name="MeshRendererTab_MeshRenderer" Visibility="Visible" />
                                </DockPanel>
                            </Border>
                            <TextBlock Text="Usages" Background="AliceBlue" HorizontalAlignment="Stretch" Padding="3" ToolTip="Every file that uses this Mesh&#x0a;Right click to open in Package Editor" Grid.Row="0" Grid.Column="2"/>
                            <controls:ListBoxScroll x:Name="lstbx_MeshUsages" DockPanel.Dock="Right" MinWidth="250" ItemsSource="{Binding SelectedItem.Usages, ElementName=lstbx_Meshes }" Grid.Row="2" Grid.Column="2" >
                                <controls:ListBoxScroll.ItemTemplate>
                                    <DataTemplate>
                                        <TextBlock>
                                            <TextBlock.Text>
                                                <MultiBinding Converter="{StaticResource FileIndexToNameConverter}">
                                                    <Binding Path="FileKey"/>
                                                    <Binding Path="FileListExtended" RelativeSource="{RelativeSource Mode=FindAncestor, AncestorType={x:Type Window}}"/>
                                                    <Binding Path="UIndex"/>
                                                </MultiBinding>
                                            </TextBlock.Text>
                                        </TextBlock>
                                    </DataTemplate>
                                </controls:ListBoxScroll.ItemTemplate>
                                <controls:ListBoxScroll.ItemContainerStyle>
                                    <Style TargetType="ListBoxItem">
                                        <Style.Triggers>
                                            <DataTrigger Binding="{Binding Path=IsInMod}" Value="True">
                                                <Setter Property="Foreground" Value="IndianRed"/>
                                                <Setter Property="TextElement.ToolTip" Value="Mod - DLC file from a Mod"/>
                                            </DataTrigger>
                                        </Style.Triggers>
                                    </Style>
                                </controls:ListBoxScroll.ItemContainerStyle>
                                <controls:ListBoxScroll.ContextMenu>
                                    <ContextMenu>
                                        <MenuItem Header="Open Usage" Command="{Binding OpenUsagePkgCommand}" ToolTip="Opens this Usage in Package Editor." />
                                        <MenuItem Header="Open in Meshplorer" Command="{Binding OpenUsagePkgCommand}" CommandParameter="Meshplorer" ToolTip="Opens this Usage in Meshplorer.">
                                            <MenuItem.Icon>
                                                <Image Source="{StaticResource iconMeshplorer16}" Width="64"/>
                                            </MenuItem.Icon>
                                        </MenuItem>
                                    </ContextMenu>
                                </controls:ListBoxScroll.ContextMenu>
                            </controls:ListBoxScroll>
                        </Grid>
                    </TabItem>
                    <!-- Textures -->
                    <TabItem Header="Textures" TabIndex="4">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="24"/>
                                <RowDefinition Height="*"/>
                            </Grid.RowDefinitions>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <TextBlock Text="Textures" Background="AliceBlue" HorizontalAlignment="Stretch" Padding="3" ToolTip="All the textures in the game (Grey is DLC only)" Grid.Row="0" Grid.Column="0"/>
                            <controls:ListBoxScroll x:Name="lstbx_Textures" MinWidth="300" ItemsSource="{Binding Path=CurrentDataBase.Textures}" SelectionChanged="lstbx_Textures_SelectionChanged" Grid.Row="1" Grid.Column="0">
                                <controls:ListBoxScroll.ItemTemplate>
                                    <DataTemplate>
                                        <StackPanel Orientation="Horizontal">
                                            <TextBlock Text="{Binding TextureName}" />
                                            <TextBlock FontSize="10" Text=" (" VerticalAlignment="Center"/>
                                            <TextBlock FontSize="10" Text="{Binding ParentPackage}" VerticalAlignment="Center" />
                                            <TextBlock FontSize="10" Text=", " VerticalAlignment="Center" />
                                            <TextBlock FontSize="10" Text="{Binding CFormat}" VerticalAlignment="Center" />
                                            <TextBlock FontSize="10" Text=", " VerticalAlignment="Center" />
                                            <TextBlock FontSize="10" Text="{Binding SizeX}" VerticalAlignment="Center" />
                                            <TextBlock FontSize="10" Text="x" VerticalAlignment="Center" />
                                            <TextBlock FontSize="10" Text="{Binding SizeY}" VerticalAlignment="Center" />
                                            <TextBlock FontSize="10" Text=", " VerticalAlignment="Center" />
                                            <TextBlock FontSize="10" Text="{Binding TexGrp}" VerticalAlignment="Center" />
                                            <TextBlock FontSize="10" Text=", " VerticalAlignment="Center" />
                                            <TextBlock FontSize="10" Text="{Binding CRC, StringFormat='0x{0}'}" VerticalAlignment="Center" />
                                            <TextBlock FontSize="10" Text=")  " VerticalAlignment="Center" />
                                        </StackPanel>
                                    </DataTemplate>
                                </controls:ListBoxScroll.ItemTemplate>
                                <controls:ListBoxScroll.ItemContainerStyle>
                                    <Style TargetType="ListBoxItem">
                                        <Style.Triggers>
                                            <DataTrigger Binding="{Binding Path=IsDLCOnly}" Value="True">
                                                <Setter Property="Background" Value="LightGray"/>
                                                <Setter Property="TextElement.ToolTip" Value="DLC - Requires ShaderCache"/>
                                            </DataTrigger>
                                            <DataTrigger Binding="{Binding Path=IsModOnly}" Value="True">
                                                <Setter Property="Foreground" Value="IndianRed"/>
                                                <Setter Property="TextElement.ToolTip" Value="Mod - Texture comes from a DLC mod"/>
                                            </DataTrigger>
                                        </Style.Triggers>
                                    </Style>
                                </controls:ListBoxScroll.ItemContainerStyle>
                            </controls:ListBoxScroll>
                            <TextBlock Text="Texture Viewer" Background="AliceBlue" HorizontalAlignment="Stretch" Padding="3" ToolTip="Click button to toggle the viewer" Grid.Row="0" Grid.Column="1"/>
                            <Border BorderBrush="LightSlateGray" BorderThickness="0.65" Grid.Row="1" Grid.Column="1" Background="LightYellow">
                                <DockPanel x:Name="details_Textures" MinWidth="350" MaxWidth="550" Margin="3">
                                    <ToggleButton x:Name="btn_TextRenderToggle" Content="Toggle Texture Rendering" DockPanel.Dock="Bottom" MaxHeight="30" ClickMode="Release" Click="btn_TextRenderToggle_Click"/>
                                    <Grid>
                                        <exportLoaderControls:TextureViewerExportLoader x:Name="EmbeddedTextureViewerTab_EmbeddedTextureViewer" ViewerModeOnly="True" Visibility="Collapsed"/>
                                        <exportLoaderControls:BIKExternalExportLoader x:Name="BIKExternalExportLoaderTab_BIKExternalExportLoader" ViewerModeOnly="True" Visibility="Collapsed"/>
                                    </Grid>
                                </DockPanel>
                            </Border>
                            <TextBlock Text="Usages" Background="AliceBlue" HorizontalAlignment="Stretch" Padding="3" ToolTip="Every file that uses this texture&#x0a;Right click to open in Package Editor" Grid.Row="0" Grid.Column="2"/>
                            <controls:ListBoxScroll x:Name="lstbx_TextureUsages"  MinWidth="250" ItemsSource="{Binding SelectedItem.Usages, ElementName=lstbx_Textures }" Grid.Row="1" Grid.Column="2">
                                <controls:ListBoxScroll.ItemTemplate>
                                    <DataTemplate>
                                        <TextBlock>
                                            <TextBlock.Text>
                                                <MultiBinding Converter="{StaticResource FileIndexToNameConverter}">
                                                    <Binding Path="FileKey"/>
                                                    <Binding Path="FileListExtended" RelativeSource="{RelativeSource Mode=FindAncestor, AncestorType={x:Type Window}}"/>
                                                    <Binding Path="UIndex"/>
                                                </MultiBinding>
                                            </TextBlock.Text>
                                        </TextBlock>
                                    </DataTemplate>
                                </controls:ListBoxScroll.ItemTemplate>
                                <controls:ListBoxScroll.ItemContainerStyle>
                                    <Style TargetType="ListBoxItem">
                                        <Style.Triggers>
                                            <DataTrigger Binding="{Binding Path=IsInDLC}" Value="True">
                                                <Setter Property="Background" Value="LightGray"/>
                                                <Setter Property="TextElement.ToolTip" Value="DLC - Requires ShaderCache"/>
                                            </DataTrigger>
                                            <DataTrigger Binding="{Binding Path=IsInMod}" Value="True">
                                                <Setter Property="Foreground" Value="IndianRed"/>
                                                <Setter Property="TextElement.ToolTip" Value="Mod - file from a mod DLC directory"/>
                                            </DataTrigger>
                                        </Style.Triggers>
                                    </Style>
                                </controls:ListBoxScroll.ItemContainerStyle>
                                <controls:ListBoxScroll.ContextMenu>
                                    <ContextMenu>
                                        <MenuItem Header="Open Usage" Command="{Binding OpenUsagePkgCommand}" ToolTip="Opens this Usage in Package Editor." />
                                    </ContextMenu>
                                </controls:ListBoxScroll.ContextMenu>
                            </controls:ListBoxScroll>
                        </Grid>
                    </TabItem>
                    <!-- Animations -->
                    <TabItem Header="Animations" TabIndex="5">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="24"/>
                                <RowDefinition Height="*"/>
                            </Grid.RowDefinitions>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition MinWidth="350" Width="*"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <TextBlock Text="Animsequences / Ambient Performance Tracks" Background="AliceBlue" HorizontalAlignment="Stretch" Padding="3" ToolTip="Animations within the game" Grid.Row="0" Grid.Column="0"/>
                            <controls:ListBoxScroll x:Name="lstbx_Anims" MinWidth="300" ItemsSource="{Binding Path=CurrentDataBase.Animations}" Grid.Row="1" Grid.Column="0">
                                <controls:ListBoxScroll.ItemTemplate>
                                    <DataTemplate>
                                        <StackPanel Orientation="Horizontal">
                                            <TextBlock Text="{Binding AnimSequence}"/>
                                            <TextBlock FontSize="10" Text=" (Ambient Performance)" VerticalAlignment="Center" Visibility="{Binding IsAmbPerf, Converter={StaticResource BoolToVisibilityConverter}}"/>
                                        </StackPanel>
                                    </DataTemplate>
                                </controls:ListBoxScroll.ItemTemplate>
                                <controls:ListBoxScroll.ItemContainerStyle>
                                    <Style TargetType="ListBoxItem">
                                        <Style.Triggers>
                                            <DataTrigger Binding="{Binding Path=IsModOnly}" Value="True">
                                                <Setter Property="Foreground" Value="IndianRed"/>
                                                <Setter Property="TextElement.ToolTip" Value="Mod - Mesh comes from a mod"/>
                                            </DataTrigger>
                                        </Style.Triggers>
                                    </Style>
                                </controls:ListBoxScroll.ItemContainerStyle>
                                <controls:ListBoxScroll.ContextMenu>
                                    <ContextMenu>
                                        <MenuItem Header="View in Animviewer" Command="{Binding OpenInAnimViewerCommand}" ToolTip="Open in Animviewer." />
                                        <MenuItem Header="Open In Animation Importer/Exporter" Command="{Binding OpenInAnimationImporterCommand}"/>
                                        <MenuItem Header="Export To PSA" Command="{Binding ExportToPSACommand}"/>
                                    </ContextMenu>
                                </controls:ListBoxScroll.ContextMenu>
                            </controls:ListBoxScroll>
                            <TextBlock Text="Details" Background="AliceBlue" HorizontalAlignment="Stretch" Padding="3" ToolTip="Details of each animation" Grid.Row="0" Grid.Column="1"/>
                            <Border BorderBrush="LightSlateGray" BorderThickness="0.65" Grid.Row="1" Grid.Column="1">
                                <StackPanel x:Name="details_Anim" MinWidth="200" Margin="8">
                                    <StackPanel.Style>
                                        <Style>
                                            <Style.Triggers>
                                                <DataTrigger Binding="{Binding ElementName=lstbx_Anims, Path=SelectedIndex}" Value=">=0">
                                                    <Setter Property="StackPanel.Visibility" Value="Visible"/>
                                                </DataTrigger>
                                            </Style.Triggers>
                                        </Style>
                                    </StackPanel.Style>
                                    <TextBlock Text="Ambient Performance" FontWeight="DemiBold" Margin="0,5,0,0" Visibility="{Binding Path=SelectedItem.IsAmbPerf, ElementName=lstbx_Anims, Converter={StaticResource BoolToVisibilityConverter}}"/>
                                    <TextBlock Text="Sequence Name: " Margin="0,5,0,0" />
                                    <TextBlock Text="{Binding Path=SelectedItem.SeqName, ElementName=lstbx_Anims}" />
                                    <TextBlock Text="Animation Group: " Margin="0,5,0,0" Visibility="{Binding Path=SelectedItem.IsAmbPerf, ElementName=lstbx_Anims, Converter={StaticResource InverseBoolToVisibilityConverter}}"/>
                                    <TextBlock Text="{Binding Path=SelectedItem.AnimData, ElementName=lstbx_Anims}" Visibility="{Binding SelectedItem.IsAmbPerf, ElementName=lstbx_Anims, Converter={StaticResource InverseBoolToVisibilityConverter}}"/>
                                    <TextBlock Text="Length (s): " Margin="0,5,0,0" Visibility="{Binding SelectedItem.IsAmbPerf, ElementName=lstbx_Anims, Converter={StaticResource InverseBoolToVisibilityConverter}}"/>
                                    <TextBlock Text="{Binding Path=SelectedItem.Length, ElementName=lstbx_Anims}" Visibility="{Binding SelectedItem.IsAmbPerf, ElementName=lstbx_Anims, Converter={StaticResource InverseBoolToVisibilityConverter}}"/>
                                    <TextBlock Text="Number of Frames (runs at 30fps): " Margin="0,5,0,0" Visibility="{Binding SelectedItem.IsAmbPerf, ElementName=lstbx_Anims, Converter={StaticResource InverseBoolToVisibilityConverter}}"/>
                                    <TextBlock Text="Number of Animation Sets: " Margin="0,5,0,0" Visibility="{Binding SelectedItem.IsAmbPerf, ElementName=lstbx_Anims, Converter={StaticResource BoolToVisibilityConverter}}"/>
                                    <TextBlock Text="{Binding Path=SelectedItem.Frames, ElementName=lstbx_Anims}" />
                                    <TextBlock Text="Compression Format: " Margin="0,5,0,0" Visibility="{Binding SelectedItem.IsAmbPerf, ElementName=lstbx_Anims, Converter={StaticResource InverseBoolToVisibilityConverter}}"/>
                                    <TextBlock Text="{Binding Path=SelectedItem.Compression, ElementName=lstbx_Anims}" Visibility="{Binding SelectedItem.IsAmbPerf, ElementName=lstbx_Anims, Converter={StaticResource InverseBoolToVisibilityConverter}}"/>
                                    <TextBlock Text="Key Format: " Margin="0,5,0,0" Visibility="{Binding SelectedItem.IsAmbPerf, ElementName=lstbx_Anims, Converter={StaticResource InverseBoolToVisibilityConverter}}"/>
                                    <TextBlock Text="{Binding Path=SelectedItem.KeyFormat, ElementName=lstbx_Anims}" Visibility="{Binding SelectedItem.IsAmbPerf, ElementName=lstbx_Anims, Converter={StaticResource InverseBoolToVisibilityConverter}}"/>
                                </StackPanel>
                            </Border>
                            <TextBlock Text="Usages" Background="AliceBlue" HorizontalAlignment="Stretch" Padding="3" ToolTip="Every file that uses this animsequence&#x0a;Right click to open in Package Editor" Grid.Row="0" Grid.Column="2"/>
                            <controls:ListBoxScroll x:Name="lstbx_AnimUsages" MinWidth="200" ItemsSource="{Binding SelectedItem.Usages, ElementName=lstbx_Anims }" Grid.Row="1" Grid.Column="2">
                                <controls:ListBoxScroll.ItemTemplate>
                                    <DataTemplate>
                                        <TextBlock>
                                            <TextBlock.Text>
                                                <MultiBinding Converter="{StaticResource FileIndexToNameConverter}">
                                                    <Binding Path="FileKey"/>
                                                    <Binding Path="FileListExtended" RelativeSource="{RelativeSource Mode=FindAncestor, AncestorType={x:Type Window}}"/>
                                                    <Binding Path="UIndex"/>
                                                </MultiBinding>
                                            </TextBlock.Text>
                                        </TextBlock>
                                    </DataTemplate>
                                </controls:ListBoxScroll.ItemTemplate>
                                
                                <controls:ListBoxScroll.ItemContainerStyle>
                                    <Style TargetType="ListBoxItem">
                                        <Style.Triggers>
                                            <DataTrigger Binding="{Binding Path=IsInMod}" Value="True">
                                                <Setter Property="Foreground" Value="IndianRed"/>
                                                <Setter Property="TextElement.ToolTip" Value="Mod - file from a mod DLC directory"/>
                                            </DataTrigger>
                                        </Style.Triggers>
                                    </Style>
                                </controls:ListBoxScroll.ItemContainerStyle>
                                <controls:ListBoxScroll.ContextMenu>
                                    <ContextMenu>
                                        <MenuItem Header="Open Usage" Command="{Binding OpenUsagePkgCommand}" ToolTip="Opens this Usage in Package Editor." />
                                    </ContextMenu>
                                </controls:ListBoxScroll.ContextMenu>
                            </controls:ListBoxScroll>
                        </Grid>
                    </TabItem>
                    <!-- VFX-->
                    <TabItem Header="VFX" TabIndex="6">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="24"/>
                                <RowDefinition Height="*"/>
                            </Grid.RowDefinitions>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition MinWidth="300" Width="*"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <TextBlock Text="Particle Systems and Receiver Effects (Visual Effects)" Background="AliceBlue" HorizontalAlignment="Stretch" Padding="3" ToolTip="Particle systems (Grey is DLC only)" Grid.Row="0" Grid.Column="0"/>
                            <controls:ListBoxScroll x:Name="lstbx_Particles" DockPanel.Dock="Left" MinWidth="300" ItemsSource="{Binding Path=CurrentDataBase.Particles}" Grid.Row="1" Grid.Column="0">
                                <controls:ListBoxScroll.ItemTemplate>
                                    <DataTemplate>
                                        <StackPanel Orientation="Horizontal">
                                            <TextBlock Text="{Binding PSName}" />
                                            <TextBlock Text=" (" FontSize="10" VerticalAlignment="Center"/>
                                            <TextBlock Text="{Binding VFXType}" FontSize="10" VerticalAlignment="Center"/>
                                            <TextBlock Text=")" FontSize="10" VerticalAlignment="Center"/>
                                        </StackPanel>
                                    </DataTemplate>
                                </controls:ListBoxScroll.ItemTemplate>
                                <controls:ListBoxScroll.ItemContainerStyle>
                                    <Style TargetType="ListBoxItem">
                                        <Style.Triggers>
                                            <DataTrigger Binding="{Binding Path=IsDLCOnly}" Value="True">
                                                <Setter Property="Background" Value="LightGray"/>
                                                <Setter Property="TextElement.ToolTip" Value="DLC - Requires ShaderCache"/>
                                            </DataTrigger>
                                            <DataTrigger Binding="{Binding Path=IsModOnly}" Value="True">
                                                <Setter Property="Foreground" Value="IndianRed"/>
                                                <Setter Property="TextElement.ToolTip" Value="Mod - Particle system created by a modder"/>
                                            </DataTrigger>
                                        </Style.Triggers>
                                    </Style>
                                </controls:ListBoxScroll.ItemContainerStyle>
                            </controls:ListBoxScroll>
                            <TextBlock Text="Details" Background="AliceBlue" HorizontalAlignment="Stretch" Padding="3" ToolTip="Additional details" Grid.Row="0" Grid.Column="1"/>
                            <Border BorderBrush="LightSlateGray" BorderThickness="0.65" Grid.Row="1" Grid.Column="1">
                                <StackPanel x:Name="details_PS" MinWidth="200" Margin="3">
                                    <StackPanel.Style>
                                        <Style>
                                            <Style.Triggers>
                                                <DataTrigger Binding="{Binding ElementName=lstbx_Particles, Path=SelectedIndex}" Value=">=0">
                                                    <Setter Property="StackPanel.Visibility" Value="Visible"/>
                                                </DataTrigger>
                                            </Style.Triggers>
                                        </Style>
                                    </StackPanel.Style>
                                    <TextBlock Text="Parent Package: " Margin="0,5,0,0"/>
                                    <TextBlock Text="{Binding Path=SelectedItem.ParentPackage, ElementName=lstbx_Particles}" />
                                    <TextBlock Text="System Complexity (effect count): " Margin="0,5,0,0"/>
                                    <TextBlock Text="{Binding Path=SelectedItem.EffectCount, ElementName=lstbx_Particles}" />
                                    <TextBlock Text="Is DLC Only (dlc shadercache needed): " Margin="0,5,0,0"/>
                                    <TextBlock Text="{Binding Path=SelectedItem.IsDLCOnly, ElementName=lstbx_Particles}" />
                                </StackPanel>
                            </Border>
                            <TextBlock Text="Usages" Background="AliceBlue" HorizontalAlignment="Stretch" Padding="3" ToolTip="Every file that uses this effect&#x0a;Right click to open in Package Editor" Grid.Row="0" Grid.Column="2"/>
                            <controls:ListBoxScroll x:Name="lstbx_PSUsages" DockPanel.Dock="Right" MinWidth="200" ItemsSource="{Binding SelectedItem.Usages, ElementName=lstbx_Particles }" Grid.Row="1" Grid.Column="2">
                                <controls:ListBoxScroll.ItemTemplate>
                                    <DataTemplate>
                                        <TextBlock>
                                            <TextBlock.Text>
                                                <MultiBinding Converter="{StaticResource FileIndexToNameConverter}">
                                                    <Binding Path="FileKey"/>
                                                    <Binding Path="FileListExtended" RelativeSource="{RelativeSource Mode=FindAncestor, AncestorType={x:Type Window}}"/>
                                                    <Binding Path="UIndex"/>
                                                </MultiBinding>
                                            </TextBlock.Text>
                                        </TextBlock>
                                    </DataTemplate>
                                </controls:ListBoxScroll.ItemTemplate>
                                <controls:ListBoxScroll.ItemContainerStyle>
                                    <Style TargetType="ListBoxItem">
                                        <Style.Triggers>
                                            <DataTrigger Binding="{Binding Path=IsInDLC}" Value="True">
                                                <Setter Property="Background" Value="LightGray"/>
                                                <Setter Property="TextElement.ToolTip" Value="DLC - Requires ShaderCache"/>
                                            </DataTrigger>
                                            <DataTrigger Binding="{Binding Path=IsInMod}" Value="True">
                                                <Setter Property="Foreground" Value="IndianRed"/>
                                                <Setter Property="TextElement.ToolTip" Value="Mod - file from a mod DLC directory"/>
                                            </DataTrigger>
                                        </Style.Triggers>
                                    </Style>
                                </controls:ListBoxScroll.ItemContainerStyle>
                                <controls:ListBoxScroll.ContextMenu>
                                    <ContextMenu>
                                        <MenuItem Header="Open Usage" Command="{Binding OpenUsagePkgCommand}" ToolTip="Opens this Usage in Package Editor." />
                                    </ContextMenu>
                                </controls:ListBoxScroll.ContextMenu>
                            </controls:ListBoxScroll>
                        </Grid>
                    </TabItem>
                    <!-- GUI -->
                    <TabItem Header="GUI" TabIndex="7">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="24"/>
                                <RowDefinition Height="*"/>
                            </Grid.RowDefinitions>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition MinWidth="300" Width="*"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <TextBlock Text="GUI Elements (ScaleForm)" Background="AliceBlue" HorizontalAlignment="Stretch" Padding="3" ToolTip="GUI Elements such as menus and Hud." Grid.Row="0" Grid.Column="0"/>
                            <controls:ListBoxScroll x:Name="lstbx_Scaleform" DockPanel.Dock="Left" MinWidth="300" ItemsSource="{Binding Path=CurrentDataBase.GUIElements}" Grid.Row="1" Grid.Column="0">
                                <controls:ListBoxScroll.ItemTemplate>
                                    <DataTemplate>
                                        <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                                            <TextBlock Text="{Binding GUIName}" />
                                            <TextBlock Text="  size: " FontSize="10"/>
                                            <TextBlock Text="{Binding DataSize}" FontSize="10" />
                                        </StackPanel>
                                    </DataTemplate>
                                </controls:ListBoxScroll.ItemTemplate>
                                <controls:ListBoxScroll.ItemContainerStyle>
                                    <Style TargetType="ListBoxItem">
                                        <Style.Triggers>
                                            <DataTrigger Binding="{Binding Path=IsModOnly}" Value="True">
                                                <Setter Property="Foreground" Value="IndianRed"/>
                                                <Setter Property="TextElement.ToolTip" Value="Mod - created by a modder"/>
                                            </DataTrigger>
                                        </Style.Triggers>
                                    </Style>
                                </controls:ListBoxScroll.ItemContainerStyle>
                            </controls:ListBoxScroll>
                            <TextBlock Text="Details" Background="AliceBlue" HorizontalAlignment="Stretch" Padding="3" ToolTip="Additional details" Grid.Row="0" Grid.Column="1"/>
                            <Border BorderBrush="LightSlateGray" BorderThickness="0.65" Grid.Row="1" Grid.Column="1">
                                <StackPanel x:Name="details_GUI" MinWidth="200" Margin="3">

                                </StackPanel>
                            </Border>
                            <TextBlock Text="Usages" Background="AliceBlue" HorizontalAlignment="Stretch" Padding="3" ToolTip="Every file that uses this effect&#x0a;Right click to open in Package Editor" Grid.Row="0" Grid.Column="2"/>
                            <controls:ListBoxScroll x:Name="lstbx_GUIUsages" DockPanel.Dock="Right" MinWidth="200" ItemsSource="{Binding SelectedItem.Usages, ElementName=lstbx_Scaleform }" Grid.Row="1" Grid.Column="2">
                                <controls:ListBoxScroll.ItemTemplate>
                                    <DataTemplate>
                                        <TextBlock>
                                            <TextBlock.Text>
                                                <MultiBinding Converter="{StaticResource FileIndexToNameConverter}">
                                                    <Binding Path="FileKey"/>
                                                    <Binding Path="FileListExtended" RelativeSource="{RelativeSource Mode=FindAncestor, AncestorType={x:Type Window}}"/>
                                                    <Binding Path="UIndex"/>
                                                </MultiBinding>
                                            </TextBlock.Text>
                                        </TextBlock>
                                    </DataTemplate>
                                </controls:ListBoxScroll.ItemTemplate>
                                <controls:ListBoxScroll.ItemContainerStyle>
                                    <Style TargetType="ListBoxItem">
                                        <Style.Triggers>
                                            <DataTrigger Binding="{Binding Path=IsInMod}" Value="True">
                                                <Setter Property="Foreground" Value="IndianRed"/>
                                                <Setter Property="TextElement.ToolTip" Value="Mod - file from a mod DLC directory"/>
                                            </DataTrigger>
                                        </Style.Triggers>
                                    </Style>
                                </controls:ListBoxScroll.ItemContainerStyle>
                                <controls:ListBoxScroll.ContextMenu>
                                    <ContextMenu>
                                        <MenuItem Header="Open Usage" Command="{Binding OpenUsagePkgCommand}" ToolTip="Opens this Usage in Package Editor." />
                                    </ContextMenu>
                                </controls:ListBoxScroll.ContextMenu>
                            </controls:ListBoxScroll>
                        </Grid>
                    </TabItem>
                    <!-- Lines -->
                    <TabItem Header="Lines" TabIndex="8" Visibility="{Binding Path=ParseConvos, Converter={StaticResource BoolToVisibilityConverter}}">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="30"/>
                                <RowDefinition Height="1*"/>
                                <RowDefinition Height="1*"/>
                            </Grid.RowDefinitions>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="3*"/>
                                <ColumnDefinition MinWidth="300" Width="1*"/>
                            </Grid.ColumnDefinitions>
                            <StackPanel Orientation="Horizontal" Grid.Row="0" Grid.Column="0" Background="AliceBlue">
                                <TextBlock Text="Lines" HorizontalAlignment="Stretch" Padding="3" ToolTip="Conversation Lines"  />
                                <xctk:WatermarkComboBox Name="cmbbx_filterSpkrs" Watermark="Filter by Speaker" ItemsSource="{Binding SpeakerList}" SelectionChanged="cmbbx_filterSpkrs_SelectionChanged" Margin="10, 3" Padding="1" MinWidth="120" IsEditable="True" IsTextSearchEnabled="True" IsEnabled="{Binding IsGettingTLKs, Converter={StaticResource InverseBooleanConverter}}"/>
                                <TextBlock Text="Parsing TLKs: " Visibility="{Binding IsGettingTLKs, Converter={StaticResource BoolToVisibilityConverter}}" Margin="5,0" VerticalAlignment="Center"/>
                                <ProgressBar IsIndeterminate="True" Visibility="{Binding IsGettingTLKs, Converter={StaticResource BoolToVisibilityConverter}}" Margin="3,0" Width="170" Height="15"/>
                            </StackPanel>
                            <ListView x:Name="lstbx_Lines" MinWidth="300" ItemsSource="{Binding CurrentDataBase.Lines}" Grid.Row="1" Grid.Column="0" Grid.RowSpan="2" GridViewColumnHeader.Click="views_ColumnHeader_Click" SelectionChanged="lstbx_Lines_SelectionChanged" >
                                <ListView.View>
                                    <GridView ColumnHeaderContainerStyle="{StaticResource FileLVHeader}">
                                        <GridViewColumn DisplayMemberBinding="{Binding Speaker}" Width="100" Header="Speaker"/>
                                        <GridViewColumn DisplayMemberBinding="{Binding StrRef}" Width="60" Header="StrRef" />
                                        <GridViewColumn DisplayMemberBinding="{Binding Line}" Header="Line" />
                                        <GridViewColumn DisplayMemberBinding="{Binding Convo}" Header="Conversation" />
                                    </GridView>
                                </ListView.View>
                                <ListView.ContextMenu>
                                    <ContextMenu>
                                        <MenuItem Header="Open in Package Editor" Command="{Binding OpenUsagePkgCommand}" ToolTip="Opens this conversation in Package Editor.">
                                            <MenuItem.Icon>
                                                <Image Source="{StaticResource iconPackageEditor16}" Width="64"/>
                                            </MenuItem.Icon>
                                        </MenuItem>
                                        <MenuItem Header="Open in Dialogue Editor" Command="{Binding OpenUsagePkgCommand}" CommandParameter="DlgEd" ToolTip="Opens this conversation in Dialogue Editor.">
                                            <MenuItem.Icon>
                                                <Image Source="{StaticResource iconDialogueEditor16}" Width="64"/>
                                            </MenuItem.Icon>
                                        </MenuItem>
                                        <Separator/>
                                        <MenuItem Header="Copy Line to Clipboard" Command="{Binding CopyToClipboardCommand}" CommandParameter="Line" ToolTip="Copy this line's text to the clipboard."/>
                                        <MenuItem Header="Copy StringRef to Clipboard" Command="{Binding CopyToClipboardCommand}" CommandParameter="StrRef" ToolTip="Copy this line's String Reference to the clipboard."/>
                                    </ContextMenu>
                                </ListView.ContextMenu>
                            </ListView>
                            <TextBlock Text="Details" Background="AliceBlue" HorizontalAlignment="Stretch" Padding="3" ToolTip="Additional details" Grid.Row="0" Grid.Column="1"/>
                            <Border BorderBrush="LightSlateGray" BorderThickness="0.65" Grid.Row="1" Grid.Column="1">
                                <StackPanel Margin="5" Visibility="{Binding CurrentConvo.Item1, Converter={StaticResource NullVisibilityConverter}}" >
                                    <TextBlock Text="Conversation:" FontSize="14"/>
                                    <TextBlock Text="{Binding CurrentConvo.Item1}" FontSize="14" Margin="3"/>
                                    <TextBlock Text="Found In:" FontSize="14" Margin="0,5,0,0"/>
                                    <StackPanel Orientation="Horizontal">
                                        <TextBlock Text="{Binding CurrentConvo.Item2}" FontSize="14" Margin="3"/>
                                        <TextBlock Text=" #" FontSize="14" Margin="0,5,0,0"/>
                                        <TextBlock Text="{Binding CurrentConvo.Item3}" FontSize="14" Margin="3"/>
                                    </StackPanel>
                                    <TextBlock Text="{Binding CurrentConvo.Item4}" FontSize="14" Margin="3"/>
                                    <TextBlock Text="(Ambient)" FontSize="14" Margin="3" Visibility="{Binding CurrentConvo.Item5, Converter={StaticResource BoolToVisibilityConverter}}"/>
                                    <StackPanel Orientation="Horizontal" Margin="3">
                                        <Button x:Name="btn_OpenConvoPackEd" Command="{Binding OpenUsagePkgCommand}" ToolTip="Opens this conversation in Package Editor." Margin="3" Padding="2" Height="40" Width="40">
                                            <Button.Content>
                                                <fa:ImageAwesome Icon="Solid_Cube" Width="32" Height="32" Foreground="DarkBlue"/>
                                            </Button.Content>
                                        </Button>
                                        <Button x:Name="btn_OpenConvoDiagEd" Command="{Binding OpenUsagePkgCommand}" CommandParameter="DlgEd" ToolTip="Opens this conversation in Dialogue Editor." Margin="3" Padding="2" Height="40" Width="40">
                                            <Button.Content>
                                                <fa:ImageAwesome Icon="Regular_Comment" Width="32" Height="32" Foreground="DarkBlue"/>
                                            </Button.Content>
                                        </Button>
                                    </StackPanel>
                                </StackPanel>
                            </Border>
                            <DockPanel Grid.Row="2" Grid.Column="1" >
                                <StackPanel DockPanel.Dock="Top">
                                    <TextBlock Text="Playback" Background="AliceBlue" HorizontalAlignment="Stretch" Padding="3" ToolTip="Playback of selected line." />
                                    <TabControl x:Name="genderTabs" SelectionChanged="genderTabs_SelectionChanged">
                                        <TabItem Header="Male"/>
                                        <TabItem Header="Female"/>
                                    </TabControl>
                                </StackPanel>
                                <ToggleButton x:Name="btn_LinePlaybackToggle" Content="Toggle Line Playback" Margin="5" Click="btn_LinePlaybackToggle_Click" IsChecked="False" MaxHeight="30" ClickMode="Release" DockPanel.Dock="Bottom"/>
                                <exportLoaderControls:Soundpanel x:Name="SoundpanelWPF_ADB" PlayBackOnlyMode="True" />
                            </DockPanel>
                        </Grid>
                    </TabItem>
                    <!-- Plot-->
                    <TabItem Header="Plot Elements" TabIndex="9" Visibility="{Binding Path=ParsePlotUsages, Converter={StaticResource BoolToVisibilityConverter}}">
                        <DockPanel>
                            <TabControl x:Name="tabCtrl_plotUsage" SelectionChanged="PETabControl_SelectionChanged">
                                <TabItem Header="Bools" TabIndex="1">
                                    <controls:ListBoxScroll x:Name="lstbx_PlotBool" ItemsSource="{Binding CurrentDataBase.PlotUsages.Bools}" 
                                                            MinWidth="300" MaxWidth="500"  SelectionChanged="lstbx_PlotElement_SelectionChanged">
                                        <controls:ListBoxScroll.ItemTemplate>
                                            <DataTemplate>
                                                <TextBlock Text="{Binding DisplayText}"/>
                                            </DataTemplate>
                                        </controls:ListBoxScroll.ItemTemplate>
                                        <controls:ListBoxScroll.ContextMenu>
                                            <ContextMenu>
                                                <!-- <MenuItem Header="Open in Plot Database" Command="{Binding OpenInPlotDBCommand}" ToolTip="Opens this plot element in the Plot Database" /> -->
                                            </ContextMenu>
                                        </controls:ListBoxScroll.ContextMenu>
                                    </controls:ListBoxScroll>
                                </TabItem>
                                <TabItem Header="Ints" TabIndex="2">
                                    <controls:ListBoxScroll x:Name="lstbx_PlotInt" ItemsSource="{Binding CurrentDataBase.PlotUsages.Ints}" 
                                                            MinWidth="300" MaxWidth="500"  SelectionChanged="lstbx_PlotElement_SelectionChanged">
                                        <controls:ListBoxScroll.ItemTemplate>
                                            <DataTemplate>
                                                <TextBlock Text="{Binding DisplayText}"/>
                                            </DataTemplate>
                                        </controls:ListBoxScroll.ItemTemplate>
                                        <controls:ListBoxScroll.ContextMenu>
                                            <ContextMenu>
                                                <!-- <MenuItem Header="Open in Plot Database" Command="{Binding OpenInPlotDBCommand}" ToolTip="Opens this plot element in the Plot Database" /> -->
                                            </ContextMenu>
                                        </controls:ListBoxScroll.ContextMenu>
                                    </controls:ListBoxScroll>
                                </TabItem>
                                <TabItem Header="Floats" TabIndex="3">
                                    <controls:ListBoxScroll x:Name="lstbx_PlotFloat" ItemsSource="{Binding CurrentDataBase.PlotUsages.Floats}" 
                                                            MinWidth="300" MaxWidth="500"  SelectionChanged="lstbx_PlotElement_SelectionChanged">
                                        <controls:ListBoxScroll.ItemTemplate>
                                            <DataTemplate>
                                                <TextBlock Text="{Binding DisplayText}"/>
                                            </DataTemplate>
                                        </controls:ListBoxScroll.ItemTemplate>
                                        <controls:ListBoxScroll.ContextMenu>
                                            <ContextMenu>
                                                <!-- <MenuItem Header="Open in Plot Database" Command="{Binding OpenInPlotDBCommand}" ToolTip="Opens this plot element in the Plot Database" /> -->
                                            </ContextMenu>
                                        </controls:ListBoxScroll.ContextMenu>
                                    </controls:ListBoxScroll>
                                </TabItem>
                                <TabItem Header="Transitions" TabIndex="4">
                                    <controls:ListBoxScroll x:Name="lstbx_PlotTrans" ItemsSource="{Binding CurrentDataBase.PlotUsages.Transitions}" 
                                                            MinWidth="300" MaxWidth="500"  SelectionChanged="lstbx_PlotElement_SelectionChanged">
                                        <controls:ListBoxScroll.ItemTemplate>
                                            <DataTemplate>
                                                <TextBlock Text="{Binding DisplayText}"/>
                                            </DataTemplate>
                                        </controls:ListBoxScroll.ItemTemplate>
                                        <controls:ListBoxScroll.ContextMenu>
                                            <ContextMenu>
                                                <!-- <MenuItem Header="Open in Plot Database" Command="{Binding OpenInPlotDBCommand}" ToolTip="Opens this plot element in the Plot Database" /> -->
                                                <MenuItem Header="Open Transition" Command="{Binding OpenPEDefinitionCommand}" ToolTip="Opens this transition in Plot Editor" />
                                            </ContextMenu>
                                        </controls:ListBoxScroll.ContextMenu>
                                    </controls:ListBoxScroll>
                                </TabItem>
                                <TabItem Header="Conditionals" TabIndex="5">
                                    <controls:ListBoxScroll x:Name="lstbx_PlotCond" ItemsSource="{Binding CurrentDataBase.PlotUsages.Conditionals}" 
                                                            MinWidth="300" MaxWidth="500"  SelectionChanged="lstbx_PlotElement_SelectionChanged">
                                        <controls:ListBoxScroll.ItemTemplate>
                                            <DataTemplate>
                                                <TextBlock Text="{Binding DisplayText}"/>
                                            </DataTemplate>
                                        </controls:ListBoxScroll.ItemTemplate>
                                        <controls:ListBoxScroll.ContextMenu>
                                            <ContextMenu>
                                                <!-- <MenuItem Header="Open in Plot Database" Command="{Binding OpenInPlotDBCommand}" ToolTip="Opens this plot element in the Plot Database" /> -->
                                                <MenuItem Header="Open Conditional" Command="{Binding OpenPEDefinitionCommand}" ToolTip="Opens this conditional in the toolset" />
                                            </ContextMenu>
                                        </controls:ListBoxScroll.ContextMenu>
                                    </controls:ListBoxScroll>
                                </TabItem>
                            </TabControl>

                            <Grid DockPanel.Dock="Right">
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="24"/>
                                    <RowDefinition Height="*"/>
                                </Grid.RowDefinitions>
                                <StackPanel Orientation="Horizontal" Grid.Row="0" Background="AliceBlue">
                                    <TextBlock Text="Usages"  HorizontalAlignment="Stretch" Padding="3"
                                               ToolTip="Shows all the files that use this class, and the first export number&#x0a;Right click to open in Package Editor" />
                                </StackPanel>
                                <controls:ListBoxScroll x:Name="lstbx_PlotUsages" MinWidth="200" ItemsSource="{Binding SelectedPlotUsages}" Grid.Row="1" >
                                    <controls:ListBoxScroll.Resources>
                                        <DataTemplate DataType="{x:Type assetDatabase:PlotUsage}">
                                            <StackPanel Orientation="Vertical">
                                                <TextBlock>
                                                    <TextBlock.Text>
                                                        <MultiBinding Converter="{StaticResource FileIndexToNameConverter}">
                                                            <Binding Path="FileKey"/>
                                                            <Binding Path="FileListExtended" RelativeSource="{RelativeSource Mode=FindAncestor, AncestorType={x:Type Window}}"/>
                                                            <Binding Path="UIndex"/>
                                                        </MultiBinding>
                                                    </TextBlock.Text>
                                                </TextBlock>
                                                <TextBlock FontSize="9">
                                                    <Run Text="{Binding ContextDisplayString, Mode=OneWay}" /> <Run Text="{Binding ContainerID}"/>
                                                </TextBlock>
                                            </StackPanel>
                                        </DataTemplate>
                                    </controls:ListBoxScroll.Resources>
                                    <controls:ListBoxScroll.ItemContainerStyle>
                                        <Style TargetType="ListBoxItem">
                                            <Style.Triggers>
                                                <DataTrigger Binding="{Binding Path=IsDefault}" Value="True">
                                                    <Setter Property="TextElement.FontWeight" Value="Bold"/>
                                                    <Setter Property="TextElement.ToolTip" Value="Default value"/>
                                                </DataTrigger>
                                                <DataTrigger Binding="{Binding Path=IsMod}" Value="True">
                                                    <Setter Property="TextElement.Foreground" Value="IndianRed"/>
                                                    <Setter Property="TextElement.ToolTip" Value="Is Mod File"/>
                                                </DataTrigger>
                                            </Style.Triggers>
                                        </Style>
                                    </controls:ListBoxScroll.ItemContainerStyle>
                                    <controls:ListBoxScroll.ContextMenu>
                                        <ContextMenu>
                                            <MenuItem Header="Open Usage" Command="{Binding OpenUsagePkgCommand}" ToolTip="Opens this Usage in it's relevant tool" />
                                        </ContextMenu>
                                    </controls:ListBoxScroll.ContextMenu>
                                </controls:ListBoxScroll>
                            </Grid>
                        </DockPanel>    
                    </TabItem>
                </TabControl>
            </DockPanel>
        </DockPanel>
        <xctk:BusyIndicator.BusyContentTemplate>
            <DataTemplate>
                <StackPanel DataContext="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type Window}}}">
                    <TextBlock Text="{Binding BusyHeader}" FontWeight="Bold" TextAlignment="Center"/>
                    <TextBlock Text="{Binding BusyText}"/>
                    <ProgressBar Value="{Binding OverallProgressValue}" Maximum="{Binding OverallProgressMaximum}" IsIndeterminate="{Binding BusyBarInd}"  Margin="0,5,0,0" Height="15" />
                    <Button Content="Cancel" HorizontalAlignment="center" Margin="0,5,0,0" Padding="3"  Command="{Binding CancelDumpCommand}" />
                </StackPanel>
            </DataTemplate>
        </xctk:BusyIndicator.BusyContentTemplate>
        <xctk:BusyIndicator.ProgressBarStyle>
            <Style TargetType="ProgressBar" >
                <Setter Property="Visibility" Value="Collapsed"/>
            </Style>
        </xctk:BusyIndicator.ProgressBarStyle>
    </xctk:BusyIndicator>
</bases:TrackingNotifyPropertyChangedWindowBase>
